# –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Selectel

–ï—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ CORS —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Selectel, –≤–æ—Ç —á—Ç–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏ —á—Ç–æ –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å.

## ‚úÖ –ß—Ç–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)

```bash
# –£–¥–∞–ª–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
rm -f /tmp/cors.json
rm -f /tmp/cors-*.json
rm -f /tmp/root-r6.crt
rm -f /tmp/setup_cors.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–¥–∞–ª–∏–ª–æ—Å—å
ls -la /tmp/cors* /tmp/root-r6.crt /tmp/setup_cors.py 2>/dev/null || echo "‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã"
```

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –£–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∫–ª—é—á–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `export AWS_ACCESS_KEY_ID` –∏ `export AWS_SECRET_ACCESS_KEY` –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:

```bash
# –£–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
unset AWS_ACCESS_KEY_ID
unset AWS_SECRET_ACCESS_KEY
unset AWS_SECRET_ACCESS_KEY
unset AWS_DEFAULT_REGION
unset AWS_CA_BUNDLE
unset REQUESTS_CA_BUNDLE
unset SSL_CERT_FILE
unset PYTHONHTTPSVERIFY

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã
env | grep AWS || echo "‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ AWS —É–¥–∞–ª–µ–Ω—ã"
```

## üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–∞–Ω–¥

–ï—Å–ª–∏ –≤—ã –≤–≤–æ–¥–∏–ª–∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, –æ–Ω–∏ –º–æ–≥–ª–∏ –ø–æ–ø–∞—Å—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–∞–Ω–¥ —Å –∫–ª—é—á–∞–º–∏
history | grep -i "AWS_ACCESS_KEY\|AWS_SECRET\|0baba4c7fe22428fa1c6082cab846142"

# –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –∫–æ–º–∞–Ω–¥—ã —Å –∫–ª—é—á–∞–º–∏, —É–¥–∞–ª–∏—Ç–µ –∏—Ö –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
# –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –±—ã–ª–∞ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º 123:
# history -d 123

# –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã):
# history -c
# history -w  # –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

## üóëÔ∏è –£–¥–∞–ª–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏ AWS CLI (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏)

–ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ AWS CLI:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏ –µ—Å—Ç—å
cat ~/.aws/credentials 2>/dev/null
cat ~/.aws/config 2>/dev/null

# –ï—Å–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, selectel-temp), —É–¥–∞–ª–∏—Ç–µ –∏—Ö:
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é:
nano ~/.aws/credentials  # –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ü–∏–∏ [selectel-temp] –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–µ
nano ~/.aws/config         # –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ü–∏–∏ [profile selectel-temp] –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–µ

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é, –µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã:
# rm -f ~/.aws/credentials ~/.aws/config
```

## ‚úÖ –ß—Ç–æ –ª—É—á—à–µ –û–°–¢–ê–í–ò–¢–¨

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Selectel

**–û—Å—Ç–∞–≤—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** `/usr/local/share/ca-certificates/selectel-root.crt` ‚Äî –æ–Ω –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å S3:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
ls -la /usr/local/share/ca-certificates/selectel-root.crt

# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º—É –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
# –£–¥–∞–ª—è—Ç—å –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ!
```

### AWS CLI (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

–ï—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ AWS CLI, –µ–≥–æ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å ‚Äî –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á (–±—ç–∫–∞–ø—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ bucket –∏ —Ç.–¥.). –ï—Å–ª–∏ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ AWS CLI
which aws

# –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å AWS CLI v2:
# rm -rf /usr/local/aws
# rm -f /usr/local/bin/aws /usr/local/bin/aws_completer
```

## üìã –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –£–¥–∞–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`/tmp/cors.json`, `/tmp/root-r6.crt`, `/tmp/setup_cors.py`)
- [ ] –£–¥–∞–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∫–ª—é—á–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –æ—á–∏—â–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ (–µ—Å–ª–∏ —Ç–∞–º –±—ã–ª–∏ –∫–ª—é—á–∏)
- [ ] –£–¥–∞–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ AWS CLI (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å)
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Å—Ç–∞–≤–ª–µ–Ω (–æ–Ω –Ω—É–∂–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é)
- [ ] **–ö–†–ò–¢–ò–ß–ù–û**: –ï—Å–ª–∏ –≤—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –∫–ª—é—á–∏ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, —Å–º–µ–Ω–∏—Ç–µ –∏—Ö –≤ –ø–∞–Ω–µ–ª–∏ Selectel!

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –°–º–µ–Ω–∞ –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞

–ï—Å–ª–∏ –≤—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Å–≤–æ–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö –∏–ª–∏ –≤—ã–≤–æ–¥–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Selectel
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Object Storage** ‚Üí **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ S3-–∫–ª—é—á–∞–º–∏**
3. –ù–∞–π–¥–∏—Ç–µ –∫–ª—é—á —Å Access Key ID `0baba4c7fe22428fa1c6082cab846142`
4. **–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–ª—é—á** –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
5. –û–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á–∏ –≤ `.env.prod` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —á–∏—Å—Ç–∞—è.
